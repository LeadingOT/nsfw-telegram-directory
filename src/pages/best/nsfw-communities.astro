---
import BaseLayout from '../../layouts/BaseLayout.astro';
import ListingCard from '../../components/ListingCard.astro';
import { getCollection } from 'astro:content';

const allListings = await getCollection('listings');
const filteredListings = allListings.filter(l => 
  l.data.category?.toLowerCase().includes('nsfw communities')
).slice(0, 12);

const title = `Best NSFW Communities NSFW Telegram 2026`;
const description = `Discover the best nsfw communities nsfw telegram in 2026. Compare features, pricing, and reviews to find the perfect option for your needs.`;
---

<BaseLayout title={title} description={description}>
  <div class="mb-8">
    <h1 class="text-4xl font-bold mb-4">{title}</h1>
    <p class="text-lg text-gray-600 max-w-3xl">
      {description}
    </p>
  </div>

  {filteredListings.length > 0 ? (
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {filteredListings.map((listing) => (
        <ListingCard {...listing.data} />
      ))}
    </div>
  ) : (
    <p class="text-gray-500">No nsfw communities listings found. Check back soon!</p>
  )}

  <div class="mt-12 p-6 bg-blue-50 rounded-lg">
    <h2 class="text-2xl font-bold mb-3">About NSFW Communities NSFW Telegram</h2>
    <p class="text-gray-700 leading-relaxed">
      This curated list features the top nsfw communities options available in 2026. 
      We regularly update our rankings based on user reviews, features, pricing, and overall value.
    </p>
  </div>
</BaseLayout>
